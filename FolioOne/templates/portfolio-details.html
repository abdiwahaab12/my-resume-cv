{% extends "base.html" %}

{% block title %}{{ project.title }} - Portfolio{% endblock %}
{% block body_class %}portfolio-details-page{% endblock %}

{% block content %}
<!-- Portfolio Details Section -->
<section id="portfolio-details" class="portfolio-details section">
  <div class="container section-title" data-aos="fade-up">
    <h2>Portfolio Details</h2>
    <p>Necessitatibus eius consequatur ex aliquid fuga eum quidem sint consectetur velit. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium totam rem aperiam</p>
  </div>

  <div class="container" data-aos="fade-up" data-aos-delay="100">
    <div class="row gy-4">
      <div class="col-lg-6" data-aos="fade-right">
        <div class="portfolio-details-media">
          <div class="main-image">
            <div class="portfolio-details-slider swiper init-swiper" data-aos="zoom-in">
              <script type="application/json" class="swiper-config">
                {
                  "loop": true,
                  "speed": 1000,
                  "autoplay": {"delay": 6000},
                  "effect": "creative",
                  "creativeEffect": {
                    "prev": {"shadow": true, "translate": [0, 0, -400]},
                    "next": {"translate": ["100%", 0, 0]}
                  },
                  "slidesPerView": 1,
                  "navigation": {
                    "nextEl": ".swiper-button-next",
                    "prevEl": ".swiper-button-prev"
                  }
                }
              </script>
              <div class="swiper-wrapper">
                <div class="swiper-slide">
                  {% if project.image_url %}
                  <img src="{{ url_for('uploaded_file', filename=project.image_url) }}" alt="{{ project.title }}" class="img-fluid">
                  {% else %}
                  <div class="no-image-placeholder d-flex align-items-center justify-content-center bg-light" style="height: 300px;">
                    <div class="text-center text-muted">
                      <i class="bi bi-image fs-1"></i>
                      <p class="mt-2">No Image</p>
                    </div>
                  </div>
                  {% endif %}
                </div>
                {% if project.gallery_images_list %}
                  {% for image in project.gallery_images_list %}
                  <div class="swiper-slide">
                    <img src="{{ url_for('uploaded_file', filename=image) }}" alt="{{ project.title }}" class="img-fluid">
                  </div>
                  {% endfor %}
                {% endif %}
              </div>
              <div class="swiper-button-prev"></div>
              <div class="swiper-button-next"></div>
            </div>
          </div>

          <div class="thumbnail-grid" data-aos="fade-up" data-aos-delay="200">
            <div class="row g-2 mt-3">
              <div class="col-3">
                {% if project.gallery_images_list %}
                  {% for image in project.gallery_images_list %}
                  <div class="col-3">
                    <img src="{{ url_for('uploaded_file', filename=image) }}" alt="Gallery Image" class="img-fluid glightbox">
                  </div>
                  {% endfor %}
                {% else %}
                  <div class="col-12 text-center text-muted">
                    <i class="bi bi-image fs-1"></i>
                    <p class="mt-2">No gallery images available</p>
                  </div>
                {% endif %}
              </div>
            </div>
          </div>

          {% if project.technologies %}
          <div class="tech-stack-badges" data-aos="fade-up" data-aos-delay="300">
            {% for tech in project.technologies %}
            <span>{{ tech }}</span>
            {% endfor %}
          </div>
          {% endif %}
        </div>
      </div>

      <div class="col-lg-6" data-aos="fade-left">
        <div class="portfolio-details-content">
          <div class="project-meta">
            <div class="badge-wrapper">
              <span class="project-badge">{{ project.category }}</span>
            </div>
            <div class="date-client">
              <div class="meta-item">
                <i class="bi bi-calendar-check"></i>
                <span>{{ project.created_at.strftime('%B %Y') }}</span>
              </div>
              <div class="meta-item">
                <i class="bi bi-buildings"></i>
                <span>Personal Project</span>
              </div>
            </div>
          </div>

          <h2 class="project-title">{{ project.title }}</h2>

          {% if project.project_url %}
          <div class="project-website">
            <i class="bi bi-link-45deg"></i>
            <a href="{{ project.project_url }}" target="_blank">{{ project.project_url }}</a>
          </div>
          {% endif %}

          <div class="project-overview">
            <p class="lead">{{ project.description }}</p>

            {% if project.long_description %}
            <div class="accordion project-accordion" id="portfolio-details-projectAccordion">
              <div class="accordion-item" data-aos="fade-up">
                <h2 class="accordion-header">
                  <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#portfolio-details-collapse-1" aria-expanded="true" aria-controls="collapseOne">
                    <i class="bi bi-clipboard-data me-2"></i> Project Overview
                  </button>
                </h2>
                <div id="portfolio-details-collapse-1" class="accordion-collapse collapse show" data-bs-parent="#portfolio-details-projectAccordion">
                  <div class="accordion-body">
                    <p>{{ project.long_description }}</p>
                  </div>
                </div>
              </div>
            </div>
            {% endif %}
          </div>

          <div class="cta-buttons" data-aos="fade-up" data-aos-delay="400">
            {% if project.project_url %}
            <a href="{{ project.project_url }}" class="btn-view-project" target="_blank">View Live Project</a>
            {% endif %}
            {% if project.github_url %}
            <a href="{{ project.github_url }}" class="btn-next-project" target="_blank">View Code <i class="bi bi-arrow-right"></i></a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
